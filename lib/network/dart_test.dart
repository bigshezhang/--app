import 'dart:convert';
import 'dart:io';
import 'package:http/http.dart' as http;

Future<Map<String, dynamic>> extractJSONContent(Map<String, dynamic> selfExtractConfig, String jsonResponse) async {
  print("å¼€å§‹ JSON æå–");

  final config = selfExtractConfig["site2"];
  final type = config["type"];
  final pathToTitle = config["path_to_title"].split('.');
  final pathToContent = config["path_to_content"].split('.');
  final defaultContent = config["default_content"];

  if (type != "json") {
    throw Exception("Unsupported type: $type");
  }

  dynamic jsonData;
  try {
    jsonData = jsonDecode(jsonResponse);
  } catch (e) {
    throw FormatException("Invalid JSON format: $e");
  }

  dynamic extractedContent = jsonData;
  dynamic extractedTitle = jsonData;

  try {
    for (final key in pathToTitle) {
      if (key.contains('[') && key.contains(']')) {
        // å¤„ç†æ•°ç»„ç´¢å¼•
        final parts = key.split(RegExp(r'\[|\]'));
        final arrayKey = parts[0];
        final index = int.parse(parts[1]);
        extractedTitle = extractedTitle[arrayKey][index];
      } else {
        extractedTitle = extractedTitle[key];
      }

      if (extractedTitle == null) {
        extractedTitle = defaultContent;
        break;
      }
    }
  } catch (e) {
    extractedTitle = defaultContent;
  }

  try {
    for (final key in pathToContent) {
      if (key.contains('[') && key.contains(']')) {
        // å¤„ç†æ•°ç»„ç´¢å¼•
        final parts = key.split(RegExp(r'\[|\]'));
        final arrayKey = parts[0];
        final index = int.parse(parts[1]);
        extractedContent = extractedContent[arrayKey][index];
      } else {
        extractedContent = extractedContent[key];
      }

      if (extractedContent == null) {
        extractedContent = defaultContent;
        break;
      }
    }
  } catch (e) {
    extractedContent = defaultContent;
  }

  return {
    "title" : extractedTitle,
    "content": extractedContent,
    "prompt": selfExtractConfig["prompt"]
  };
}

void main() async {
  final config = {
    "site2": {
      "type": "json",
      "path_to_content": "data[0].note_list[0].desc",
      "path_to_title": "data[0].note_list[0].title",

      "default_content": "Content not found"
    },
    "prompt": "è¯·æå–å†…å®¹"
  };
  String hi = "233$config";
  // Example JSON response
  final jsonResponse = r'''{"code":0,"success":true,"msg":"æˆåŠŸ","data":[{"model_type":"note","user":{"track_duration":0,"fstatus":"none","image":"https://sns-avatar-qc.xhscdn.com/avatar/64a4fef4d53f0b000189e8ba.jpg?imageView2/2/w/120/format/jpg","followed":false,"show_red_official_verify_icon":false,"nickname":"æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤","red_official_verify_type":0,"red_official_verified":false,"userid":"5e8105fb00000000010046b1","level":{"image":""},"id":"5e8105fb00000000010046b1","name":"æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤","red_id":"9645696547"},"note_list":[{"user":{"name":"æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤","red_id":"9645696547","show_red_official_verify_icon":false,"userid":"5e8105fb00000000010046b1","red_official_verify_type":0,"red_official_verified":false,"track_duration":0,"fstatus":"none","id":"5e8105fb00000000010046b1","image":"https://sns-avatar-qc.xhscdn.com/avatar/64a4fef4d53f0b000189e8ba.jpg?imageView2/2/w/120/format/jpg","followed":false,"nickname":"æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤","level":{"image":""}},"last_update_time":1718327375,"sticky":true,"long_press_share_info":{"function_entries":[{"type":"image_download"}],"guide_audited":false,"content":"","title":"","is_star":false,"block_private_msg":false,"show_wechat_tag":false},"title":"æ­å·é«˜è€ƒå¤è¯»å­¦æ ¡2024æš‘æœŸæ‹›ç”Ÿä¸­ï¼","desc":"éšç€é«˜è€ƒé«˜è€ƒæˆç»©çš„å…¬å¸ƒï¼Œå‡ å®¶æ¬¢å–œå‡ å®¶æ„ã€‚å¦‚æœè¯´é«˜è€ƒæ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šï¼Œé«˜å¤åˆä½•å°ä¸æ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šã€‚å¯¹æˆç»©ä¸æ»¡æ„æˆ–è€…å‡å­¦æœ‰å›°éš¾çš„åŒå­¦åº”è¯¥è®¤çœŸåˆ†ææ€»ç»“é«˜è€ƒå¤±åˆ©çš„åŸå› ï¼Œå†æ ¹æ®è‡ªèº«æƒ…å†µåšå‡ºé€‰æ‹©ã€‚åœ¨è¿™é‡Œåˆ†äº«é€‰æ‹©é«˜è€ƒè¡¥ä¹ å­¦æ ¡çš„æ”»ç•¥ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚\n\t\nâœ…é€‰æ‹©é€‚åˆè‡ªå·±çš„è¡¥ä¹ ç­\n\t\nåœ¨é€‰æ‹©é«˜å¤å­¦æ ¡æ—¶ï¼Œä¸è¦ç›²ç›®è·Ÿé£ï¼Œè¦æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µé€‰æ‹©é€‚åˆè‡ªå·±çš„ç­çº§ã€‚å¯ä»¥ä»ä»¥ä¸‹æ–¹é¢è€ƒè™‘ï¼š\n\t\n1.æ•™å­¦è´¨é‡ï¼šå¯ä»¥é€šè¿‡å’¨è¯¢è€å¸ˆã€äº†è§£ç­çº§çš„ä¼˜åŠ¿å’Œå¼±ç‚¹ç­‰æ–¹é¢æ¥äº†è§£è¡¥ä¹ ç­çš„æ•™å­¦è´¨é‡ã€‚\n\t\n2.å¸ˆèµ„åŠ›é‡ï¼šé«˜å¤å­¦æ ¡çš„å¸ˆèµ„åŠ›é‡æ˜¯éå¸¸é‡è¦çš„ï¼Œä¼˜ç§€çš„è€å¸ˆå¯ä»¥å¸®åŠ©å­¦ç”Ÿæ›´å¥½åœ°æŒæ¡çŸ¥è¯†ç‚¹ã€‚\n\t\n3.ç­çº§è§„æ¨¡ï¼šç­çº§è§„æ¨¡ä¸å®œå¤ªå¤§ï¼Œè¿‡å¤§çš„ç­çº§å®¹æ˜“å¯¼è‡´è€å¸ˆæ— æ³•å…³æ³¨åˆ°æ¯ä¸ªå­¦ç”Ÿçš„å­¦ä¹ æƒ…å†µã€‚\n\t\nâœ…åˆç†å®‰æ’å­¦ä¹ æ—¶é—´\n\t\n1.åˆ¶å®šå­¦ä¹ è®¡åˆ’ï¼šå¯ä»¥æ ¹æ®è‡ªå·±çš„å­¦ä¹ è¿›åº¦å’Œè¡¥ä¹ ç­çš„æ•™å­¦è¿›åº¦ï¼Œåˆ¶å®šä¸€ä»½è¯¦ç»†çš„é«˜å¤å­¦ä¹ è®¡åˆ’ï¼Œæ˜ç¡®æ¯å¤©è¦å®Œæˆçš„ä»»åŠ¡ã€‚\n\t\n2.åˆç†å®‰æ’æ—¶é—´ï¼šè¦æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µï¼Œåˆç†å®‰æ’å­¦ä¹ æ—¶é—´ï¼Œä¸è¦è¿‡äºç–²åŠ³ï¼Œä¹Ÿä¸è¦æµªè´¹æ—¶é—´ã€‚\n\t\n3.åˆç†å®‰æ’ä¼‘æ¯æ—¶é—´ï¼šé€‚å½“çš„ä¼‘æ¯å¯ä»¥å¸®åŠ©æ¢å¤ç²¾åŠ›ï¼Œæé«˜å­¦ä¹ æ•ˆç‡ï¼Œå› æ­¤è¦åˆç†å®‰æ’ä¼‘æ¯æ—¶é—´ã€‚\n\t\nâœ…æ³¨é‡åšé¢˜ç»ƒä¹ \n\t\n1.æ³¨é‡åŸºç¡€çŸ¥è¯†ï¼šé«˜è€ƒçš„è€ƒç‚¹å¾ˆå¤šéƒ½æ˜¯åŸºç¡€çŸ¥è¯†ï¼Œå› æ­¤è¦æ³¨é‡åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ å’ŒæŒæ¡ã€‚\n\t\n2.å¤šåšæ¨¡æ‹Ÿé¢˜ï¼šæ¨¡æ‹Ÿé¢˜æ˜¯è€ƒå¯Ÿå­¦ç”Ÿç»¼åˆèƒ½åŠ›çš„é‡è¦æ–¹å¼ï¼Œå› æ­¤è¦å¤šåšæ¨¡æ‹Ÿé¢˜ï¼Œæé«˜è§£é¢˜èƒ½åŠ›ã€‚\n\t\n3.æ€»ç»“è§£é¢˜æ–¹æ³•ï¼šåœ¨åšé¢˜çš„è¿‡ç¨‹ä¸­ï¼Œè¦æ€»ç»“è§£é¢˜æ–¹æ³•ï¼Œæ‰¾åˆ°è‡ªå·±çš„å¼±ç‚¹ï¼ŒåŠ å¼ºç»ƒä¹ ã€‚\n\t\nâœ…é‡è§†è¯¾åä½œä¸š\n\t\n1.åŠæ—¶å®Œæˆï¼šè¦åŠæ—¶å®Œæˆè¯¾åä½œä¸šï¼Œä¸è¦æ‹–å»¶ã€‚\n\t\n2.è®¤çœŸæ£€æŸ¥ï¼šå®Œæˆä½œä¸šåï¼Œè¦è®¤çœŸæ£€æŸ¥ï¼Œæ‰¾å‡ºé”™è¯¯å¹¶åŠæ—¶çº æ­£ã€‚\n\t\n3.å‘è€å¸ˆè¯·æ•™ï¼šåœ¨å®Œæˆä½œä¸šçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°éš¾é¢˜å¯ä»¥å‘è€å¸ˆè¯·æ•™ï¼ŒåŠæ—¶è§£å†³é—®é¢˜ã€‚\n\t\nâœ…æ³¨æ„ä¿æŒå¥½å¿ƒæ€\n\t\né«˜è€ƒæ˜¯ä¸€åœºé•¿è·‘ï¼Œéœ€è¦å¤§å®¶ä¿æŒå¥½å¿ƒæ€ï¼Œä¸è¦è½»æ˜“æ”¾å¼ƒã€‚\n\t\n1.ç§¯æå¿ƒæ€ï¼šè¦ç§¯æé¢å¯¹é«˜è€ƒï¼Œç›¸ä¿¡è‡ªå·±èƒ½å¤Ÿå–å¾—å¥½æˆç»©ã€‚\n\t\n2.ä¸è¦è¿‡äºç„¦è™‘ï¼šç„¦è™‘ä¼šå½±å“å­¦ä¹ æ•ˆæœï¼Œå› æ­¤ä¸è¦è¿‡äºç„¦è™‘ã€‚\n\t\n3.ä¿æŒå¥åº·ï¼šè¦ä¿æŒå¥åº·çš„èº«ä½“ï¼Œåˆç†é¥®é£Ÿã€é€‚å½“è¿åŠ¨ï¼Œä¿æŒå¥½å¿ƒæ€ã€‚\n\t\nå®å­ä»¬ï¼Œé€‰æ‹©é«˜å¤å­¦æ ¡çš„æ—¶å€™è¦æ“¦äº®çœ¼ç›å“¦ï¼\n\t\nğŸ‘‰æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤æ˜¯ä½ ä¸é”™çš„é€‰æ‹©ï¼\n\t\n#é«˜è€ƒå¤è¯»[è¯é¢˜]#Â Â #é«˜ä¸‰å¤è¯»[è¯é¢˜]#Â Â #å¤è¯»ç”Ÿ[è¯é¢˜]#Â Â #é«˜è€ƒ[è¯é¢˜]#Â Â #å¤è¯»[è¯é¢˜]#Â Â #å‡å­¦[è¯é¢˜]# #2025é«˜è€ƒå€’è®¡æ—¶[è¯é¢˜]#","ats":[],"images_list":[{"fileid":"spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0","width":1080,"index":0,"longitude":0,"latitude":0,"need_load_original_image":false,"scale_to_large":4,"height":1440,"url":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","url_size_large":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/1080/format/reif/q/90","original":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/5000/h/5000/format/reif/q/99&redImage/frame/0","url_multi_level":{"low":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","medium":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","high":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0"},"trace_id":"spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0"},{"url":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","url_size_large":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60?imageView2/2/w/1440/format/reif/q/90","original":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60?imageView2/2/w/5000/h/5000/format/reif/q/99&redImage/frame/0","index":0,"longitude":0,"trace_id":"spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60","need_load_original_image":false,"fileid":"spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60","height":1440,"width":1080,"url_multi_level":{"high":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","low":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","medium":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdk0uju0005nk10ntg8hlhjb62m60?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0"},"latitude":0,"scale_to_large":4},{"fileid":"spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8","width":1080,"url":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","url_multi_level":{"low":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","medium":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","high":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0"},"longitude":0,"need_load_original_image":false,"scale_to_large":4,"height":1440,"url_size_large":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8?imageView2/2/w/1440/format/reif/q/90","original":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8?imageView2/2/w/5000/h/5000/format/reif/q/99&redImage/frame/0","index":0,"latitude":0,"trace_id":"spectrum/1000g0k02pdvdu56k80005nk10ntg8hlhfgp8bi8"},{"trace_id":"spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50","need_load_original_image":false,"scale_to_large":4,"width":1080,"url":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","url_size_large":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50?imageView2/2/w/1440/format/reif/q/90","original":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50?imageView2/2/w/5000/h/5000/format/reif/q/99&redImage/frame/0","longitude":0,"latitude":0,"fileid":"spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50","height":1440,"url_multi_level":{"low":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","medium":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","high":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdve658k60005nk10ntg8hlhmur2g50?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0"},"index":0},{"url_multi_level":{"low":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","medium":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","high":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0"},"index":0,"longitude":0,"need_load_original_image":false,"height":1440,"url":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","url_size_large":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8?imageView2/2/w/1440/format/reif/q/90","original":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8?imageView2/2/w/5000/h/5000/format/reif/q/99&redImage/frame/0","scale_to_large":4,"fileid":"spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8","width":1080,"latitude":0,"trace_id":"spectrum/1000g0k02pdveqbck40005nk10ntg8hlhng52cd8"},{"width":1080,"url":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","url_size_large":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8?imageView2/2/w/1440/format/reif/q/90","original":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8?imageView2/2/w/5000/h/5000/format/reif/q/99&redImage/frame/0","url_multi_level":{"high":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","low":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0","medium":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8?imageView2/2/w/540/format/jpg/q/75%7CimageMogr2/strip&redImage/frame/0"},"index":0,"fileid":"spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8","height":1440,"need_load_original_image":false,"longitude":0,"trace_id":"spectrum/1000g0k02pdvf1fqk80005nk10ntg8hlhj9nnoa8","latitude":0,"scale_to_large":4}],"cooperate_binds":[],"countdown":0,"api_upgrade":1,"enable_brand_lottery":false,"liked_count":236,"seeded_count":0,"share_info":{"show_wechat_tag":false,"guide_audited":true,"title":"æ­å·é«˜è€ƒå¤è¯»å­¦æ ¡2024æš‘æœŸæ‹›ç”Ÿä¸­","block_private_msg":false,"link":"https://www.xiaohongshu.com/discovery/item/64abd7700000000031008ad8?app_platform=ios&app_version=8.45&share_from_user_hidden=true&xsec_source=app_share&type=normal&xsec_token=CBkm3_DTD8DxHN7xgfJnbAj_jQKX5N1f3wT6aTdAPASJY=&author_share=1","is_star":false,"function_entries":[{"type":"generate_image"},{"type":"copy_link"},{"type":"dislike"},{"type":"report"}],"content":"éšç€é«˜è€ƒé«˜è€ƒæˆç»©çš„å…¬å¸ƒï¼Œå‡ å®¶æ¬¢å–œå‡ å®¶æ„ã€‚å¦‚æœè¯´é«˜è€ƒæ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šï¼Œé«˜å¤åˆä½•å°ä¸æ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šã€‚å¯¹æˆç»©ä¸æ»¡æ„æˆ–","image":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/360/format/jpg/q/75"},"enable_fls_bridge_cards":true,"goods_info":{},"use_water_color":false,"widgets_context":"{\"origin_video_key\":\"\",\"flags\":{},\"author_id\":\"5e8105fb00000000010046b1\",\"author_name\":\"æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤\",\"q_task_id\":\"\",\"video_rec_bar_info\":\"\"}","enable_co_produce":false,"time":1688983408,"ad":{"hiding_native_widget":0,"type":"","title":"","link":"","bg_color":"","track_id":"adscpcn_383f7828-4422-11ef-8c7e-52540046b618#tracking@2didnottmdq82qaje71g4","is_tracking":false,"id":"383f7828-4422-11ef-8c7e-52540046b618","ads_id":"","track_url":"csSRzDIh8H/9MnmoptESPQx1U3HBiLJzExhGnyi4YoSM5XexTBi2ZqSxE+kGEbZhmHSUrT6CRMTEKtHQ+xl//8/Vhn/edeMV1o6wrHJYDtUQJL85d5QVLJr+EqVia5ovUyY0RRPg6PvVnHwCFm8pAzSYiATVpitMyY3oITE+4RFz0/7YMQ9tLRHbnoWmG4FS84Tf4frLD7kR9s43q3GzVy/xeLICcjTqr9QGLgmpws6VLk0Bn7Rz457rxIS2CnX11IE5BCloY3UODe24lkgw7b+IGGDwEarCfryI69hazuHGk/x/+ZknfA65pqfTRXI4","tag":"","second_jump_style":""},"head_tags":[],"need_next_step":false,"has_related_goods":true,"enable_fls_related_cards":false,"privacy":{"nick_names":"","type":0,"show_tips":false},"has_co_produce":false,"id":"64abd7700000000031008ad8","seeded":false,"mini_program_info":{"title":"@æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤ å‘äº†ä¸€ç¯‡ç¬”è®°ï¼Œå¿«ç‚¹æ¥çœ‹å§ï¼","desc":"éšç€é«˜è€ƒé«˜è€ƒæˆç»©çš„å…¬å¸ƒï¼Œå‡ å®¶æ¬¢å–œå‡ å®¶æ„ã€‚å¦‚æœè¯´é«˜è€ƒæ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šï¼Œé«˜å¤åˆä½•å°ä¸æ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šã€‚å¯¹æˆç»©ä¸æ»¡æ„æˆ–","webpage_url":"https://www.xiaohongshu.com/discovery/item/64abd7700000000031008ad8?xsec_source=app_share&xsec_token=CBkm3_DTD8DxHN7xgfJnbAj_jQKX5N1f3wT6aTdAPASJY=","thumb":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/540/format/jpg/q/75","share_title":"@æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤ å‘äº†ä¸€ç¯‡ç¬”è®°ï¼Œå¿«ç‚¹æ¥çœ‹å§ï¼","user_name":"gh_52be748ce5b7","path":"pages/main/home/index?redirect_path=%2Fpages%2Fmain%2Fnote%2Findex%3Fxsec_source%3Dapp_share%26id%3D64abd7700000000031008ad8%26type%3Dnormal%26xsec_token%3DCBkm3_DTD8DxHN7xgfJnbAj_jQKX5N1f3wT6aTdAPASJY%3D"},"view_count":0,"topics":[{"name":"é«˜è€ƒå¤è¯»","image":"http://ci.xiaohongshu.com/fd75707a-37f8-45ad-b7a7-0feaf36e9cad@r_120w_120h.jpg","link":"xhsdiscover://topic/v2/5d08938b1daca10001c47db2?page_source=note_feed.click_new_big","activity_online":false,"style":0,"discuss_num":0,"business_type":0,"id":"5d08938b000000000e00aac1"}],"widgets_groups":[["guos_test","note_next_step","second_jump_bar","cooperate_binds","note_collection","rec_next_infos","image_stickers","image_filters","product_review","related_search","cooperate_comment_component","image_goods_cards","ads_goods_cards","ads_comment_component","goods_card_v2","image_template","buyable_goods_card_v2","ads_engage_bar","challenge_card","cooperate_engage_bar","guide_post","pgy_comment_component","pgy_engage_bar","bar_below_image","aigc_collection","co_produce","widgets_ndb","next_note_guide","pgy_bbc_exp","async_group","super_activity","widgets_enhance"],["guos_test","vote_stickers","bullet_comment_lead","note_search_box","interact_pk","interact_vote","guide_heuristic","share_to_msg","follow_guide","note_share_prompt_v1","sync_group","group_share","share_guide_bubble","widgets_share"]],"media_save_config":{"disable_save":false,"disable_watermark":false,"disable_weibo_cover":false},"collected":false,"collected_count":120,"comments_count":111,"qq_mini_program_info":{"user_name":"gh_66c53d495417","path":"pages/main/note/index?xsec_source=app_share&id=64abd7700000000031008ad8&type=normal&xsec_token=CBkm3_DTD8DxHN7xgfJnbAj_jQKX5N1f3wT6aTdAPASJY=","title":"@æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤ å‘äº†ä¸€ç¯‡è¶…èµçš„ç¬”è®°ï¼Œå¿«ç‚¹æ¥çœ‹ï¼","desc":"éšç€é«˜è€ƒé«˜è€ƒæˆç»©çš„å…¬å¸ƒï¼Œå‡ å®¶æ¬¢å–œå‡ å®¶æ„ã€‚å¦‚æœè¯´é«˜è€ƒæ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šï¼Œé«˜å¤åˆä½•å°ä¸æ˜¯äººç”Ÿä¸€æ¬¡å®è´µçš„æœºä¼šã€‚å¯¹æˆç»©ä¸æ»¡æ„æˆ–","webpage_url":"https://www.xiaohongshu.com/discovery/item/64abd7700000000031008ad8?xsec_source=app_share&xsec_token=CBkm3_DTD8DxHN7xgfJnbAj_jQKX5N1f3wT6aTdAPASJY=","thumb":"http://sns-img-hw.xhscdn.com/spectrum/1000g0k02pdvd1pck80005nk10ntg8hlhn5iref0?imageView2/2/w/540/format/jpg/q/75","share_title":"@æ­å·æ±‚æ˜¯æ–°ç†æƒ³é«˜å¤ å‘äº†ä¸€ç¯‡è¶…èµçš„ç¬”è®°ï¼Œå¿«ç‚¹æ¥çœ‹ï¼"},"foot_tags":[],"liked":false,"in_censor":false,"share_code_flag":0,"has_music":false,"need_product_review":false,"liked_users":[],"model_type":"note","hash_tag":[{"name":"é«˜è€ƒå¤è¯»","type":"topic","link":"xhsdiscover://topic/v2/5d08938b1daca10001c47db2?page_source=note_feed.click_new_big&topic_name=%E9%AB%98%E8%80%83%E5%A4%8D%E8%AF%BB&source=normal&pre_source=explore_feed%26homefeed_recommend","record_count":0,"current_score":0,"id":"5d08938b000000000e00aac1","record_unit":"","bizId":"","tag_hint":"","record_emoji":""},{"name":"é«˜ä¸‰å¤è¯»","type":"topic","bizId":"","tag_hint":"","id":"5d45acf0000000000d034e72","link":"xhsdiscover://topic/v2/5d45acf04a4120000112cefa?page_source=note_feed.click_new_big&topic_name=%E9%AB%98%E4%B8%89%E5%A4%8D%E8%AF%BB&source=normal&pre_source=explore_feed%26homefeed_recommend","record_emoji":"","record_count":0,"record_unit":"","current_score":0},{"type":"topic","link":"xhsdiscover://topic/v2/5ce62621847f3e00016229a1?page_source=note_feed.click_new_big&topic_name=%E5%A4%8D%E8%AF%BB%E7%94%9F&source=normal&pre_source=explore_feed%26homefeed_recommend","record_emoji":"","tag_hint":"","current_score":0,"bizId":"","id":"5ce62621000000000d039ad8","name":"å¤è¯»ç”Ÿ","record_count":0,"record_unit":""},{"link":"xhsdiscover://topic/v2/629ec4cb530abe0001485709?page_source=note_feed.click_new_big&topic_name=%E9%AB%98%E8%80%83&source=normal&pre_source=explore_feed%26homefeed_recommend","record_emoji":"","record_count":0,"current_score":0,"bizId":"","id":"629ec4cb0000000001007223","type":"topic","record_unit":"","tag_hint":"","name":"é«˜è€ƒ"},{"link":"xhsdiscover://topic/v2/5bf7a4cd4dd8c20001566b6a?page_source=note_feed.click_new_big&topic_name=%E5%A4%8D%E8%AF%BB&source=normal&pre_source=explore_feed%26homefeed_recommend","record_emoji":"","record_count":0,"current_score":0,"bizId":"","id":"5bf7a4cd1a1875000138f5eb","name":"å¤è¯»","type":"topic","record_unit":"","tag_hint":""},{"name":"å‡å­¦","type":"topic","record_emoji":"","record_count":0,"bizId":"","tag_hint":"","id":"5c5445f3000000000f03c56b","link":"xhsdiscover://topic/v2/5c5445f3f689490001337d85?page_source=note_feed.click_new_big&topic_name=%E5%8D%87%E5%AD%A6&source=normal&pre_source=explore_feed%26homefeed_recommend","record_unit":"","current_score":0},{"record_count":0,"current_score":0,"bizId":"","tag_hint":"","link":"xhsdiscover://topic/v2/6297acd1af149500011ef7a6?page_source=note_feed.click_new_big&topic_name=2025%E9%AB%98%E8%80%83%E5%80%92%E8%AE%A1%E6%97%B6&source=normal&pre_source=explore_feed%26homefeed_recommend","record_emoji":"","type":"topic","record_unit":"","id":"6297acd10000000001001b30","name":"2025é«˜è€ƒå€’è®¡æ—¶"}],"shared_count":82,"may_have_red_packet":false,"type":"normal","red_envelope_note":false}],"comment_list":[],"track_id":""}]}''';

  try {
    final extractedData = await extractJSONContent(config, jsonResponse);
    print('Extracted Title: ${extractedData["title"]}');

    print('Extracted Content: ${extractedData["content"]}');
    print('Prompt: ${extractedData["prompt"]}');

  } catch (e) {
    print('Error: $e');
  }
}
